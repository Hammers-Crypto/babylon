syntax = "proto3";
package babylonchain.babylon.zoneconcierge;

import "tendermint/types/types.proto";

option go_package = "github.com/babylonchain/babylon/x/zoneconcierge/types";

// IndexedHeader is the metadata of a CZ header
message IndexedHeader {
  // chain_id is the ID of the chain
  string chain_id = 1;
  // hash is the hash of this header
  bytes hash = 2;
  // height is the height of this header on CZ ledger
  // (hash, height) jointly provides the position of the header on CZ ledger
  uint64 height = 3;
  // babylon_block_height is the height of the Babylon block that includes this header
  uint64 babylon_block_height = 4;
  // babylon_tx_hash is the hash of the tx that includes this header
  // (babylon_block_height, babylon_tx_hash) jointly provides the position of the header on Babylon ledger
  bytes babylon_tx_hash = 5;
}

message Fork {
  // chain_id is the ID of the chain
  string chain_id = 1;
  // blocks is the list of blocks on this fork
  repeated IndexedHeader blocks = 3;
}

// ChainInfo is the information of a CZ
message ChainInfo {
  // chain_id is the ID of the chain
  string chain_id = 1;
  // latest_header is the latest header in the canonical chain of CZ
  tendermint.types.Header latest_header = 2;
  // latest_fork is the latest fork, formed as a series of IndexedHeader (from low to high)
  Fork latest_fork = 3;
}